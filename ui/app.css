:root {
  --bg-0: #f3efe6;
  --bg-1: #fffefb;
  --ink: #17212b;
  --ink-dim: #4d5b68;
  --line: #d2c6b4;
  --accent: #0c7a71;
  --s1: #b00020;
  --s2: #d2691e;
  --s3: #556b2f;
  --s4: #2e4a6f;
  --details-width: 36%;
  --snippet-max-height: 280px;
  --patch-max-height: 280px;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: "Space Grotesk", sans-serif;
  color: var(--ink);
  background: radial-gradient(circle at 20% 20%, #efe8d7, #f5f1e9 40%, #e9e1d4);
}
.backdrop {
  position: fixed;
  inset: 0;
  background: linear-gradient(145deg, rgba(12,122,113,.08), rgba(210,105,30,.08));
  pointer-events: none;
}
.layout {
  width: min(99vw, 2200px);
  margin: 0 auto;
  padding: clamp(10px, 1.2vw, 20px);
  display: grid;
  gap: 14px;
}
.top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--bg-1);
  border: 1px solid var(--line);
  border-radius: 14px;
  padding: 14px 16px;
}
.actions { display: flex; gap: 8px; }
h1 { margin: 0 0 4px 0; font-size: 1.3rem; }
.sub { margin: 0; color: var(--ink-dim); }
code { font-family: "IBM Plex Mono", monospace; font-size: .85rem; }
.btn {
  border: 1px solid var(--line);
  background: var(--accent);
  color: #fff;
  padding: 8px 12px;
  border-radius: 10px;
  cursor: pointer;
}
.btn-lite {
  background: #f8f4ec;
  color: var(--ink);
}
.btn[disabled] {
  opacity: .5;
  cursor: not-allowed;
}
.cards {
  display: grid;
  grid-template-columns: repeat(7, minmax(120px, 1fr));
  gap: 10px;
}
.card {
  background: var(--bg-1);
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 10px;
}
.card .k { font-size: .8rem; color: var(--ink-dim); }
.card .v { font-size: 1.2rem; font-weight: 700; margin-top: 4px; }
.panel {
  background: var(--bg-1);
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 10px;
}
.view-tabs { display: flex; gap: 8px; align-items: center; }
.tab-btn {
  border: 1px solid var(--line);
  background: #f8f4ec;
  color: var(--ink);
  padding: 7px 12px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
}
.tab-btn.active {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}
.controls {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
.field { display: grid; gap: 6px; min-width: 140px; }
.field.grow { flex: 1; min-width: 280px; }
.filters-panel {
  padding-top: 6px;
  padding-bottom: 6px;
}
.filters-head {
  display: flex;
  align-items: center;
  gap: 8px;
}
.filters-title {
  font-weight: 700;
  font-size: 1rem;
  color: var(--ink);
}
.filters-head .status {
  margin-left: auto;
  font-size: .82rem;
}
#filtersPanelBody {
  margin-top: 8px;
  padding-top: 6px;
  border-top: 1px dashed #e2d4bf;
  display: grid;
  grid-template-columns: repeat(12, minmax(0, 1fr));
  gap: 8px 10px;
}
#filtersPanelBody.hidden {
  display: none;
}
#filtersPanelBody .field {
  min-width: 0;
  gap: 4px;
}
#filtersPanelBody .field.grow {
  min-width: 0;
}
#filtersPanelBody .field:nth-child(1) { grid-column: span 5; }  /* findings file */
#filtersPanelBody .field:nth-child(2) { grid-column: span 2; }  /* upload */
#filtersPanelBody .field:nth-child(3) { grid-column: span 1; }  /* severity */
#filtersPanelBody .field:nth-child(4) { grid-column: span 1; }  /* source */
#filtersPanelBody .field:nth-child(5) { grid-column: span 1; }  /* rule */
#filtersPanelBody .field:nth-child(6) { grid-column: span 1; }  /* trust tier */
#filtersPanelBody .field:nth-child(7) { grid-column: span 1; }  /* safe ai risk */
#filtersPanelBody .field:nth-child(8) { grid-column: span 1; }  /* validation */
#filtersPanelBody .field:nth-child(9) { grid-column: span 1; }  /* workflow */
#filtersPanelBody .field:nth-child(10) { grid-column: span 1; } /* quick win */
#filtersPanelBody .field:nth-child(11) { grid-column: span 1; } /* fallback */
#filtersPanelBody .field:nth-child(12) { grid-column: span 1; } /* top level */
#filtersPanelBody .field:nth-child(13) { grid-column: span 1; } /* sub cat */
#filtersPanelBody .field:nth-child(14) { grid-column: span 2; } /* search */
#filtersPanelBody .field:nth-child(15) { grid-column: span 6; } /* columns */
#filtersPanelBody .field:nth-child(16) { grid-column: span 2; } /* snippet */
#filtersPanelBody .field:nth-child(17) { grid-column: span 2; } /* patch */
#filtersPanelBody .toggles {
  max-height: 120px;
  overflow: auto;
  border: 1px solid #e8dcc8;
  border-radius: 8px;
  padding: 6px 8px;
}
label { font-size: .75rem; text-transform: uppercase; letter-spacing: .03em; color: var(--ink-dim); }
select, input {
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 5px 8px;
  font: inherit;
  background: #fff;
  height: 36px;
}
input[type="checkbox"] {
  height: auto;
  border: none;
  padding: 0;
}
.row-workflow-select {
  min-width: 116px;
  padding: 4px 6px;
  font-size: .8rem;
}
.tableWrap {
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.grid-scroll {
  overflow: auto;
  min-height: 320px;
  max-height: calc(100vh - 260px);
  border-bottom: 1px solid #eadfce;
}
table { width: 100%; border-collapse: collapse; table-layout: auto; }
th, td { text-align: left; padding: 8px; border-bottom: 1px solid #eadfce; vertical-align: top; font-size: .86rem; }
th { position: sticky; top: 0; background: #f8f4ec; z-index: 1; resize: horizontal; overflow: auto; min-width: 90px; }
th[data-col] { cursor: pointer; user-select: none; }
th[data-sort="asc"]::after { content: "  ↑"; color: #0c7a71; }
th[data-sort="desc"]::after { content: "  ↓"; color: #0c7a71; }
tr.clickable { cursor: pointer; }
tr.clickable:hover { background: #f4efe6; }
.badge {
  display: inline-block;
  border-radius: 999px;
  padding: 2px 8px;
  font-family: "IBM Plex Mono", monospace;
  font-size: .75rem;
  color: #fff;
}
.trust-badge {
  display: inline-block;
  border-radius: 999px;
  padding: 2px 8px;
  font-family: "IBM Plex Mono", monospace;
  font-size: .72rem;
  border: 1px solid #d8c9b3;
  background: #f7f2e8;
}
.trust-llm_confirmed { color: #0b6f44; border-color: #9cd6b8; background: #e9f7ef; }
.trust-fast_routed { color: #0a5d8f; border-color: #8cc7ef; background: #e7f3fc; }
.trust-fallback { color: #8a1c1c; border-color: #efb0b0; background: #fdeeee; }
.trust-regex_only { color: #6b4f00; border-color: #e6ce82; background: #fff8e6; }
.trust-roslyn { color: #5e3a95; border-color: #cbb6e8; background: #f3ebff; }
.trust-unknown { color: #4d5b68; }
.s1 { background: var(--s1); }
.s2 { background: var(--s2); }
.s3 { background: var(--s3); }
.s4 { background: var(--s4); }
.details h2 { margin: 0 0 10px 0; }
.block { margin-bottom: 10px; }
.block h3 { margin: 0 0 4px 0; font-size: .86rem; text-transform: uppercase; color: var(--ink-dim); }
.pre {
  white-space: pre-wrap;
  font-family: "IBM Plex Mono", monospace;
  font-size: .8rem;
  background: #fcfaf5;
  border: 1px solid #e8dcc8;
  border-radius: 8px;
  padding: 8px;
  min-height: 140px;
  resize: vertical;
  overflow: auto;
}
.text-auto {
  white-space: pre-wrap;
  line-height: 1.45;
}
.code-block { white-space: pre; overflow: auto; }
.code-block.snippet-block { height: var(--snippet-max-height); max-height: none; }
.code-block.patch-block { height: var(--patch-max-height); max-height: none; }
.code-block .kw { color: #7b2cbf; font-weight: 700; }
.code-block .ty { color: #005f73; }
.code-block .num { color: #9b2226; }
.code-block .str { color: #0a7f3f; }
.code-block .cm { color: #6b7280; font-style: italic; }
.code-block .line-hit {
  display: block;
  background: #fff4cc;
  border-left: 3px solid #d97706;
  padding-left: 6px;
  margin-left: -6px;
}
.code-block .diff-add { background: #e6f7ea; color: #0a6c31; display: block; }
.code-block .diff-del { background: #fde8e8; color: #9b2226; display: block; }
.code-block .diff-hdr { background: #eef2ff; color: #334155; display: block; }
.empty { padding: 10px; color: var(--ink-dim); }
.hidden { display: none; }
.pager {
  position: sticky;
  bottom: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  background: var(--bg-1);
  padding-top: 10px;
  padding-bottom: 2px;
  border-top: 1px solid #eadfce;
  margin-top: 8px;
  z-index: 2;
}
.pager-left, .pager-right { display: flex; align-items: center; gap: 8px; }
.pager-mid { font-size: .86rem; color: var(--ink-dim); }
.pager label { margin: 0; font-size: .75rem; }
.split {
  display: grid;
  grid-template-columns: minmax(0, calc(100% - var(--details-width) - 10px)) 10px minmax(320px, var(--details-width));
  gap: 12px;
  align-items: start;
}
.split-left { min-width: 0; }
.splitter {
  width: 10px;
  border-radius: 8px;
  background: linear-gradient(180deg, #eadfce, #d8c9b3);
  cursor: col-resize;
  min-height: 120px;
  align-self: stretch;
}
.split-right {
  position: sticky;
  top: 10px;
  max-height: calc(100vh - 40px);
  overflow: auto;
}
.toggles { display: flex; flex-wrap: wrap; gap: 10px; }
.toggle-item { display: inline-flex; align-items: center; gap: 6px; font-size: .8rem; padding: 2px 0; }
.mini-btn {
  border: 1px solid var(--line);
  background: #f8f4ec;
  color: var(--ink);
  border-radius: 6px;
  padding: 1px 6px;
  line-height: 1.1;
  cursor: pointer;
}
.status { color: var(--ink-dim); font-size: .86rem; }
.pill-yes { color: #0b6f44; font-weight: 700; }
.pill-no { color: #7a2832; font-weight: 700; }
.mini { color: var(--ink-dim); font-size: .76rem; }
[data-hide="1"] { display: none; }
@media (min-width: 1700px) {
  :root { --details-width: 34%; }
}
@media (max-width: 980px) {
  .cards { grid-template-columns: repeat(3, minmax(120px, 1fr)); }
  .split { grid-template-columns: 1fr; }
  .splitter { display: none; }
  .split-right { position: static; max-height: none; }
  .grid-scroll { max-height: none; }
  #filtersPanelBody { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  #filtersPanelBody .field { grid-column: span 1 !important; }
  #filtersPanelBody .field:nth-child(1),
  #filtersPanelBody .field:nth-child(14),
  #filtersPanelBody .field:nth-child(15) { grid-column: span 2 !important; }
}
@media (max-width: 640px) {
  .cards { grid-template-columns: repeat(2, minmax(120px, 1fr)); }
  .pager { flex-direction: column; align-items: flex-start; }
}
