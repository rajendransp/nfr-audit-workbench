[
  {
    "id": "NFR-FE-001",
    "title": "fetch call without AbortSignal",
    "category": "reliability",
    "top_level_category": "front_end",
    "sub_category": "concurrency",
    "severity": "S2",
    "pattern": "\\bfetch\\s*\\(\\s*[^,\\n\\)]*(?:,\\s*\\{(?![^}]*\\bsignal\\b)[^}]*\\})?\\s*\\)",
    "ignore_comment_lines": true,
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "In-flight requests should be cancellable during navigation/unmount to avoid stale updates and wasted network work."
  },
  {
    "id": "NFR-FE-002",
    "title": "Axios call without timeout",
    "category": "reliability",
    "top_level_category": "front_end",
    "sub_category": "loading",
    "severity": "S2",
    "pattern": "\\baxios\\.(get|post|put|delete|request)\\s*\\((?![^\\)]*\\btimeout\\b)(?![^\\)]*\\baxiosInstance\\b)[^\\)]*\\)",
    "ignore_comment_lines": true,
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Client calls without timeout can hang and consume resources during upstream degradation."
  },
  {
    "id": "NFR-FE-003",
    "title": "setInterval without cleanup",
    "category": "reliability",
    "top_level_category": "front_end",
    "sub_category": "concurrency",
    "severity": "S2",
    "pattern": "\\buseEffect\\s*\\(\\s*\\(\\s*=>[\\s\\S]{0,260}\\bsetInterval\\s*\\((?![\\s\\S]{0,260}\\bclearInterval\\s*\\()",
    "ignore_comment_lines": true,
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Intervals that survive component teardown cause memory leaks and repeated background execution."
  },
  {
    "id": "NFR-FE-004",
    "title": "Unhandled promise chain",
    "category": "reliability",
    "top_level_category": "front_end",
    "sub_category": "concurrency",
    "severity": "S2",
    "pattern": "\\.then\\s*\\(\\s*[^,\\)]{1,200}\\s*\\)(?!\\s*\\.catch\\s*\\()",
    "ignore_comment_lines": true,
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Unhandled async errors frequently degrade UX and mask production incidents."
  },
  {
    "id": "NFR-FE-005",
    "title": "dangerouslySetInnerHTML usage",
    "category": "reliability",
    "top_level_category": "front_end",
    "sub_category": "loading",
    "severity": "S1",
    "pattern": "\\bdangerouslySetInnerHTML\\b|\\b[A-Za-z_$][A-Za-z0-9_$]*\\.innerHTML\\s*=",
    "ignore_comment_lines": true,
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx", "*.vue", "*.html"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Unsafe HTML injection paths can create high-impact XSS and reliability incidents."
  },
  {
    "id": "NFR-FE-006",
    "title": "Array index used as React key",
    "category": "performance",
    "top_level_category": "front_end",
    "sub_category": "performance",
    "severity": "S3",
    "pattern": "\\bkey\\s*=\\s*\\{\\s*(index|i)\\s*\\}",
    "include_globs": ["*.jsx", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Unstable keys increase rerenders and can corrupt UI state mapping."
  },
  {
    "id": "NFR-FE-007",
    "title": "Large synchronous loop in render path",
    "category": "performance",
    "top_level_category": "front_end",
    "sub_category": "performance",
    "severity": "S2",
    "pattern": "\\b(render\\s*\\(|return\\s*\\()([\\s\\S]{0,300})\\b(for\\s*\\(|while\\s*\\()",
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Expensive synchronous work in render paths harms frame time and interaction latency."
  },
  {
    "id": "NFR-FE-008",
    "title": "No lazy loading for route components",
    "category": "performance",
    "top_level_category": "front_end",
    "sub_category": "loading",
    "severity": "S3",
    "pattern": "\\b(createBrowserRouter|createRoutesFromElements|Route)\\b[\\s\\S]{0,360}\\belement\\s*:\\s*<\\s*[A-Z][A-Za-z0-9_]*\\b(?![\\s\\S]{0,120}\\blazy\\s*\\(|\\bSuspense\\b|\\bimport\\s*\\()",
    "ignore_comment_lines": true,
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Eager route loading inflates initial bundle and slows first contentful render."
  },
  {
    "id": "NFR-FE-009",
    "title": "Image without lazy loading",
    "category": "performance",
    "top_level_category": "front_end",
    "sub_category": "loading",
    "severity": "S3",
    "pattern": "<img\\b(?![^>]*\\bloading=\\\"lazy\\\")(?![^>]*\\bfetchpriority=\\\"high\\\")",
    "ignore_comment_lines": true,
    "include_globs": ["*.html", "*.jsx", "*.tsx", "*.vue"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Non-lazy images increase network contention and render blocking under limited bandwidth."
  },
  {
    "id": "NFR-FE-010",
    "title": "Frequent input handler without debounce/throttle",
    "category": "performance",
    "top_level_category": "front_end",
    "sub_category": "loading",
    "severity": "S3",
    "pattern": "\\bon(Change|Input|KeyUp)\\s*=\\s*\\{(?![^\\}]{0,200}\\b(debounce|throttle)\\b)[^\\}]{0,220}(fetch|axios|dispatch|setState)",
    "ignore_comment_lines": true,
    "include_globs": ["*.jsx", "*.tsx", "*.vue"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "High-frequency handlers without shaping can overload API and client runtime."
  },
  {
    "id": "NFR-FE-011",
    "title": "console.log in app code",
    "category": "reliability",
    "top_level_category": "front_end",
    "sub_category": "performance",
    "severity": "S4",
    "pattern": "\\bconsole\\.(log|debug|info|trace)\\s*\\(",
    "ignore_comment_lines": true,
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**", "**/*test*.*", "**/*spec*.*"],
    "rationale": "Excessive client logging increases noise and can affect render performance in low-end devices."
  },
  {
    "id": "NFR-FE-012",
    "title": "Blocking synchronous Web Storage access in loop",
    "category": "performance",
    "top_level_category": "front_end",
    "sub_category": "performance",
    "severity": "S3",
    "pattern": "\\b(for\\s*\\(|while\\s*\\()[\\s\\S]{0,300}\\b(localStorage|sessionStorage)\\.(getItem|setItem)\\s*\\(",
    "ignore_comment_lines": true,
    "include_globs": ["*.js", "*.jsx", "*.ts", "*.tsx"],
    "exclude_globs": ["**/node_modules/**", "**/dist/**", "**/build/**", "**/.next/**", "**/coverage/**"],
    "rationale": "Synchronous storage in loops blocks main thread and degrades interaction under load."
  }
]
